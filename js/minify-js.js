var link=document.querySelector(".form-link"),popup=document.querySelector(".form-offer"),closedForm=document.querySelector(".close-link"),formName=popup.querySelector("[name=name]"),email=popup.querySelector("[name=email]"),text=popup.querySelector("[name=text]"),storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name")}catch(e){isStorageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("visually-hidden"),popup.classList.add("form-animation"),storage?(formName.value=storageName,email.value=storageEmail,text.focus()):formName.focus()}),closedForm.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("visually-hidden"),popup.classList.remove("form-error")}),popup.addEventListener("submit",function(e){formName.value&&email.value&&text.value?isStorageSupport&&(localStorage.setItem("name",formName.value),localStorage.setItem("email",email.value)):(e.preventDefault(),popup.classList.remove("form-animation"),popup.classList.add("form-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(popup.classList.contains("visually-hidden")||(e.preventDefault(),popup.classList.add("visually-hidden")))});
